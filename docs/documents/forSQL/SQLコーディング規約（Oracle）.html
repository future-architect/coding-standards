<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQLコーディング規約（Oracle） | Future Enterprise Coding Standards</title>
    <meta name="description" content="フューチャー株式会社が作成するエンタープライズ領域に特化したコーディング規約">
    
    <meta name="keywords" content="SQLコーディング規約,Oracle,コーディング規約,SQL">
    <link rel="preload" href="/coding-standards/assets/css/0.styles.45f53977.css" as="style"><link rel="preload" href="/coding-standards/assets/js/app.dfe06510.js" as="script"><link rel="preload" href="/coding-standards/assets/js/10.58e05c41.js" as="script"><link rel="preload" href="/coding-standards/assets/js/3.50d05cce.js" as="script"><link rel="prefetch" href="/coding-standards/assets/js/11.49e4a659.js"><link rel="prefetch" href="/coding-standards/assets/js/12.0c3a8265.js"><link rel="prefetch" href="/coding-standards/assets/js/2.d558cdb8.js"><link rel="prefetch" href="/coding-standards/assets/js/4.69d79cad.js"><link rel="prefetch" href="/coding-standards/assets/js/5.01809d4a.js"><link rel="prefetch" href="/coding-standards/assets/js/6.396955c3.js"><link rel="prefetch" href="/coding-standards/assets/js/7.4e9a1ff7.js"><link rel="prefetch" href="/coding-standards/assets/js/8.ef62beb1.js"><link rel="prefetch" href="/coding-standards/assets/js/9.28bff71c.js">
    <link rel="stylesheet" href="/coding-standards/assets/css/0.styles.45f53977.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/coding-standards/" class="home-link router-link-active"><img src="/coding-standards/images/logo.svg" alt="Future Enterprise Coding Standards" class="logo"> <span class="site-name can-hide">Future Enterprise Coding Standards</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約.html" class="nav-link">for Java11</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_8.html" class="nav-link">for Java8</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">SQL</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html" class="nav-link">for Oracle</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About Us</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.future.co.jp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  フューチャー株式会社
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://future-architect.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://qiita.com/organizations/future" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Qiita
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/future_techblog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/future.saiyo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="mailto:techblog@future.co.jp" class="nav-link external">
  Email &lt;techblog@future.co.jp&gt;
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/future-architect/coding-standards" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約.html" class="nav-link">for Java11</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_8.html" class="nav-link">for Java8</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">SQL</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html" class="nav-link">for Oracle</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">About Us</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.future.co.jp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  フューチャー株式会社
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://future-architect.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://qiita.com/organizations/future" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Qiita
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/future_techblog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/future.saiyo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="mailto:techblog@future.co.jp" class="nav-link external">
  Email &lt;techblog@future.co.jp&gt;
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/future-architect/coding-standards" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/coding-standards/documents/forSQL/" class="sidebar-link">Home</a></li><li><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html" class="active sidebar-link">SQLコーディング規約（Oracle）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#はじめに" class="sidebar-link">はじめに</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#前提条件" class="sidebar-link">前提条件</a></li></ul></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#sqlコーティング規約（可読性・管理性）" class="sidebar-link">SQLコーティング規約（可読性・管理性）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#書式全般" class="sidebar-link">書式全般</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#予約語" class="sidebar-link">予約語</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#予約語以外" class="sidebar-link">予約語以外</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#短縮名称" class="sidebar-link">短縮名称</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#文字コード" class="sidebar-link">文字コード</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#不要な空白文字（スペース）は除去する" class="sidebar-link">不要な空白文字（スペース）は除去する</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#sql文の整形" class="sidebar-link">SQL文の整形</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#コメント" class="sidebar-link">コメント</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#外部結合" class="sidebar-link">外部結合</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#型変換" class="sidebar-link">型変換</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#比較演算子-2" class="sidebar-link">比較演算子</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#order-by句" class="sidebar-link">ORDER BY句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#group-by句" class="sidebar-link">GROUP BY句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#exists句" class="sidebar-link">EXISTS句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#as句" class="sidebar-link">AS句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#where句" class="sidebar-link">WHERE句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#count文" class="sidebar-link">COUNT文</a></li></ul></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#sqlコーディング規約（パフォーマンス性）" class="sidebar-link">SQLコーディング規約（パフォーマンス性）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#検索" class="sidebar-link">検索</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#挿入" class="sidebar-link">挿入</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#更新" class="sidebar-link">更新</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#削除" class="sidebar-link">削除</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#with句-2" class="sidebar-link">WITH句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#distinct句" class="sidebar-link">DISTINCT句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#in句-2" class="sidebar-link">IN句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#not-in句" class="sidebar-link">NOT IN句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#union句" class="sidebar-link">UNION句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#パラレルヒント句" class="sidebar-link">パラレルヒント句</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#select-for-update" class="sidebar-link">SELECT FOR UPDATE</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#分析関数" class="sidebar-link">分析関数</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#インデックス" class="sidebar-link">インデックス</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html#外部結合-2" class="sidebar-link">外部結合</a></li></ul></li></ul></li></ul> </div> <div class="page"> <div class="content"><div class="vuepress-page-title" data-v-5eebe1f3><div class="share-buttons" data-v-5eebe1f3><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" data-url="https://future-architect.github.io/coding-standards/documents/forSQL/SQL%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E8%A6%8F%E7%B4%84%EF%BC%88Oracle%EF%BC%89.html" data-show-count="false" class="twitter-share-button" data-v-5eebe1f3>
      Tweet
    </a> <div data-href="https://future-architect.github.io/coding-standards/documents/forSQL/SQL%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E8%A6%8F%E7%B4%84%EF%BC%88Oracle%EF%BC%89.html" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true" class="fb-like" data-v-5eebe1f3></div> <a href="http://b.hatena.ne.jp/entry/s/future-architect.github.io/coding-standards/documents/forSQL/SQL%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E8%A6%8F%E7%B4%84%EF%BC%88Oracle%EF%BC%89.html" data-hatena-bookmark-layout="basic-label-counter" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加" class="hatena-bookmark-button" data-v-5eebe1f3><img src="https://b.st-hatena.com/images/v4/public/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" data-v-5eebe1f3></a> <div href="https://github.com/future-architect/coding-standards" data-icon="octicon-star" data-show-count="true" aria-label="Star future-architect/coding-standards on GitHub" data-v-5eebe1f3>
      Star
    </div> <a href="https://getpocket.com/save" data-lang="en" data-save-url="https://future-architect.github.io/coding-standards/documents/forSQL/SQL%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E8%A6%8F%E7%B4%84%EF%BC%88Oracle%EF%BC%89.html" data-pocket-count="horizontal" data-pocket-align="left" class="pocket-btn" data-v-5eebe1f3>Pocket</a></div> <h1 class="vuepress-page-title__title" data-v-5eebe1f3>
    SQLコーディング規約（Oracle）
  </h1> <div class="vuepress-page-title__author" data-v-5eebe1f3>
    Future Enterprise Coding Standards
  </div></div> <p>本コーディング規約は、世の中のシステム開発プロジェクトのために無償で提供致します。<br>
ただし、掲載内容および利用に際して発生した問題、それに伴う損害については、フューチャー株式会社は一切の責務を負わないものとします。<br>
また、掲載している情報は予告なく変更することがございますので、あらかじめご了承下さい。</p> <h2 id="はじめに"><a href="#はじめに" aria-hidden="true" class="header-anchor">#</a> はじめに</h2> <h3 id="前提条件"><a href="#前提条件" aria-hidden="true" class="header-anchor">#</a> 前提条件</h3> <p>本書は、SQLコーディング規約についてまとめたものである。<br>
今回RDBMSとして採用するOracleでのSQLの使用を前提に記述している。</p> <h2 id="sqlコーティング規約（可読性・管理性）"><a href="#sqlコーティング規約（可読性・管理性）" aria-hidden="true" class="header-anchor">#</a> SQLコーティング規約（可読性・管理性）</h2> <p>本章では可読性・管理性を高めることを目的としたコーディング規約について記載する。</p> <h3 id="書式全般"><a href="#書式全般" aria-hidden="true" class="header-anchor">#</a> 書式全般</h3> <p>書式全般についてのコーディング規約を下記に示す。</p> <ul><li>1行につき、1文のみを記述する。</li> <li>SQL中のインデントは、Javaコーディング規約にあわせて半角スペースではなくタブ文字とする。</li> <li>ヘボン式ローマ字を使用する。</li> <li>外来語に関しては、原語の綴りを使用する。</li> <li>横は80文字を目安に改行する。</li> <li>定数を条件に用いる場合やインライン・ビューで取得したいデータなど開発者の意図はコメントにて記載する。</li></ul> <h3 id="予約語"><a href="#予約語" aria-hidden="true" class="header-anchor">#</a> 予約語</h3> <p>予約語に対しては、大文字を使用する。(例 ： <code>SELECT</code>、<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code> 等)</p> <h3 id="予約語以外"><a href="#予約語以外" aria-hidden="true" class="header-anchor">#</a> 予約語以外</h3> <p>予約語以外に対しても、予約語と同様に大文字を使用する。(例 ： オブジェクト名、カラム名 等)</p> <h3 id="短縮名称"><a href="#短縮名称" aria-hidden="true" class="header-anchor">#</a> 短縮名称</h3> <p>SQL中に記述するエイリアス名など単語の短縮について示す。</p> <ol><li><p>外来語に関しては、原語の短縮形を使用する。短縮形が存在しない場合には、母音を抜かして表記する。<br>
例) corporation → corp  /  computer → cmptr</p></li> <li><p>ローマ字の短縮は、単語の区切れの頭文字、または母音を抜かした子音字等を利用する。<br>
例) nichijo → nchj</p></li></ol> <ul><li>カラムには必ずテーブルエイリアスを付与する</li> <li>テーブルのエイリアスは必ず付与すること。<br>
必要ない場合（単一テーブルへのSELECT等）も必ず付与すること<br>
また、テーブルのエイリアス名は同SQL文の中で重複しないように命名すること。<br>
（副問い合わせで利用したエイリアス名をメインのSQL中のエイリアス名に利用しない。など）</li></ul> <h3 id="文字コード"><a href="#文字コード" aria-hidden="true" class="header-anchor">#</a> 文字コード</h3> <p>SQLファイルの文字コード（エンコーディング）はJavaソースファイルと同じく『 Unicode UTF-8 』で保存する。</p> <h3 id="不要な空白文字（スペース）は除去する"><a href="#不要な空白文字（スペース）は除去する" aria-hidden="true" class="header-anchor">#</a> 不要な空白文字（スペース）は除去する</h3> <p>不要な空白文字（スペース）は除去すること。</p> <h3 id="sql文の整形"><a href="#sql文の整形" aria-hidden="true" class="header-anchor">#</a> SQL文の整形</h3> <p>DML文の節に対する予約語は左揃えにする。<br>
項目ごとに改行を入れ、項目の前にはインデントを挿入する。カンマは項目の前へ記入する。<br>
Javaソースファイルのようにファイルの先頭にコメント行を入れるとDB分析作業に支障があるため禁止とする。<br>
よってSQLファイルの先頭は必ず<code>SELECT</code>、<code>UPDATE</code>、<code>INSERT</code>、<code>DELETE</code>、<code>MERGE</code>の何れかになる。</p> <p>物理カラム名、テーブル名に対応する論理名を入れる場合、その後ろに単数行コメント（<code>--</code>）にて記述する。<br>
SQL内に挿入する単数行コメントは、<code>/*（半角スペース）コメント本文（半角スペース）*/</code> で行う。<br> <code>,</code>（カンマ）と<code>AND</code>については各行の先頭に記述する。（以下の例を参照のこと）<br>
SQLフレームワークで実行するSQLの場合、SQLステートメントの終わりを示す<code>;</code>（セミコロン）は記述しない。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
<span class="token comment">/*
	処理名
*/</span>
	TBL1<span class="token punctuation">.</span>COLUMN1	<span class="token keyword">AS</span>	COLUMN1	<span class="token comment">-- カラム1</span>
<span class="token punctuation">,</span>	TBL1<span class="token punctuation">.</span>COLUMN2	<span class="token keyword">AS</span>	COLUMN2	<span class="token comment">-- カラム2</span>
<span class="token keyword">FROM</span>
	TABLE1	TBL1	<span class="token comment">-- テーブル1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>WHERE句の<code>=</code>、<code>!=</code>、<code>IS</code>（<code>IS NULL</code>の<code>IS</code>）の縦位置は揃える。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">WHERE</span>
	A<span class="token punctuation">.</span>TEN_NO	<span class="token operator">=</span>	B<span class="token punctuation">.</span>TEN_NO
<span class="token operator">AND</span>	A<span class="token punctuation">.</span>KAMOKU_CD	<span class="token operator">!=</span>	<span class="token string">'1'</span>
<span class="token operator">AND</span>	A<span class="token punctuation">.</span>ANKEN_NO	<span class="token operator">IS</span>	<span class="token boolean">NULL</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="select文"><a href="#select文" aria-hidden="true" class="header-anchor">#</a> SELECT文</h4> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	TBL1<span class="token punctuation">.</span>COLUMN1	<span class="token keyword">AS</span>	COLUMN1	<span class="token comment">-- カラム1</span>
<span class="token punctuation">,</span>	TBL1<span class="token punctuation">.</span>COLUMN2	<span class="token keyword">AS</span>	COLUMN2	<span class="token comment">-- カラム2</span>
<span class="token keyword">FROM</span>
	TABLE1	TBL1	<span class="token comment">-- テーブル1</span>
<span class="token keyword">WHERE</span>
	TBL1<span class="token punctuation">.</span>COLUMN3	<span class="token operator">=</span>	<span class="token number">1</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	TBL1<span class="token punctuation">.</span>COLUMN1
<span class="token punctuation">,</span>	TBL1<span class="token punctuation">.</span>COLUMN2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="insert文"><a href="#insert文" aria-hidden="true" class="header-anchor">#</a> INSERT文</h4> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span>
<span class="token keyword">INTO</span>
	TABLE1	<span class="token comment">-- テーブル1</span>
<span class="token punctuation">(</span>
	COLUMN1	<span class="token comment">-- カラム1</span>
<span class="token punctuation">,</span>	COLUMN2	<span class="token comment">-- カラム2</span>
<span class="token punctuation">,</span>	COLUMN3	<span class="token comment">-- カラム3</span>
<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>
	VALUE1
<span class="token punctuation">,</span>	VALUE2
<span class="token punctuation">,</span>	VALUE3
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="update文"><a href="#update文" aria-hidden="true" class="header-anchor">#</a> UPDATE文</h4> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span>
	TABLE1	TBL1	<span class="token comment">-- テーブル1</span>
<span class="token keyword">SET</span>
	TBL1<span class="token punctuation">.</span>COLUMN2	<span class="token operator">=</span>	<span class="token number">100</span>	<span class="token comment">-- カラム2</span>
<span class="token punctuation">,</span>	TBL1<span class="token punctuation">.</span>COLUMN3	<span class="token operator">=</span>	<span class="token number">100</span>	<span class="token comment">-- カラム3</span>
<span class="token keyword">WHERE</span>
	TBL1<span class="token punctuation">.</span>COLUMN1	<span class="token operator">=</span>	<span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="delete文"><a href="#delete文" aria-hidden="true" class="header-anchor">#</a> DELETE文</h4> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span>
<span class="token keyword">FROM</span>
	TABLE1	TBL1	<span class="token comment">-- テーブル1</span>
<span class="token keyword">WHERE</span>
	TBL1<span class="token punctuation">.</span><span class="token keyword">VALUE</span>	<span class="token operator">=</span>	<span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="merge文"><a href="#merge文" aria-hidden="true" class="header-anchor">#</a> MERGE文</h4> <p>DB結合条件が一致した場合と不一致になった場合の、それぞれのSQL文を記述する。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">MERGE</span>
<span class="token keyword">INTO</span>
	PROFILE	P				<span class="token comment">-- PROFILEテーブル</span>
<span class="token keyword">USING</span>
	NAME	N				<span class="token comment">-- NAMEテーブル</span>
<span class="token keyword">ON</span>
	<span class="token punctuation">(</span>
		P<span class="token punctuation">.</span>NAME	<span class="token operator">=</span> N<span class="token punctuation">.</span>NAME		<span class="token comment">-- 条件</span>
	<span class="token punctuation">)</span>
<span class="token keyword">WHEN</span> <span class="token keyword">MATCHED</span> <span class="token keyword">THEN</span>			<span class="token comment">-- 条件が一致</span>
	<span class="token comment">/*UPDATE文*/</span>
<span class="token keyword">WHEN</span> <span class="token operator">NOT</span> <span class="token keyword">MATCHED</span> <span class="token keyword">THEN</span>		<span class="token comment">-- 条件が不一致</span>
	<span class="token comment">/*INSERT文*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="and（副問い合わせ）"><a href="#and（副問い合わせ）" aria-hidden="true" class="header-anchor">#</a> AND（副問い合わせ）</h4> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token operator">AND</span>	XXX	<span class="token operator">=</span>	<span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span>
			TBL1<span class="token punctuation">.</span>COLUMN1
		<span class="token punctuation">,</span>	TBL1<span class="token punctuation">.</span>COLUMN2
		<span class="token keyword">FROM</span>
			TABLE1	TBL1
	<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="case式"><a href="#case式" aria-hidden="true" class="header-anchor">#</a> CASE式</h4> <p>CASE式は下記のように記載すること。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CASE</span>
	<span class="token keyword">WHEN</span>
		XXX<span class="token punctuation">.</span>HOGE	<span class="token operator">=</span>	YYY<span class="token punctuation">.</span>FUGA
	<span class="token operator">AND</span>	XXX<span class="token punctuation">.</span>FUGA	<span class="token operator">=</span>	YYY<span class="token punctuation">.</span>FUGA
	<span class="token keyword">THEN</span>
		<span class="token number">1</span>
	<span class="token keyword">ELSE</span>
		<span class="token number">0</span>
<span class="token keyword">END</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>CASE</code>、<code>WHEN</code>、<code>THEN</code>、<code>ELSE</code>の後に改行を挿入すること。<br> <code>CASE</code>の後、<code>END</code>の前までは1インデント挿入すること。</p> <h4 id="in句"><a href="#in句" aria-hidden="true" class="header-anchor">#</a> IN句</h4> <p>カンマの後にスペースを１文字入れる。</p> <h4 id="比較演算子"><a href="#比較演算子" aria-hidden="true" class="header-anchor">#</a> 比較演算子</h4> <p>比較演算子の前後にタブ（またはスペース）を１文字入れる。</p> <h4 id="改行位置"><a href="#改行位置" aria-hidden="true" class="header-anchor">#</a> 改行位置</h4> <p>SELECT句、ORDER BY句、GROUP BY句等は最初に出現するカラムとカラムの区切りのカンマ前に改行を入れること。<br>
SELECTのFROM句の最初に出現するテーブルと結合テーブルの区切りのカンマ前に改行を入れること。<br>
WHERE句、MERGEのON句の各条件文の（ANDやORの）前に改行を入れること。<br>
命令句の後は、ヒント句が挿入できるように改行すること。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	T1<span class="token punctuation">.</span>COLUMN1	<span class="token keyword">AS</span>	COLUMN1
<span class="token punctuation">,</span>	T2<span class="token punctuation">.</span>COLUMN2	<span class="token keyword">AS</span>	COLUMN2
<span class="token keyword">FROM</span>
	TABLE1	T1
<span class="token punctuation">,</span>	TABLE2	T2
<span class="token keyword">WHERE</span>
	T1<span class="token punctuation">.</span>COLUMN3	<span class="token operator">=</span>	<span class="token number">1</span>
<span class="token operator">AND</span>	T1<span class="token punctuation">.</span>COLUMN4	<span class="token operator">=</span>	T2<span class="token punctuation">.</span>COLUMN4
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	T1<span class="token punctuation">.</span>COLUMN1
<span class="token punctuation">,</span>	T2<span class="token punctuation">.</span>COLUMN2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="with句"><a href="#with句" aria-hidden="true" class="header-anchor">#</a> WITH句</h4> <p>WITHの前後に改行を挿入すること<br>
また、インデントは下記のように記述すること</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- カラムエイリアスあり   </span>
<span class="token keyword">WITH</span>
    NAME1   <span class="token punctuation">(</span>
        COL_ALIAS1  <span class="token comment">-- カラム１</span>
    <span class="token punctuation">,</span>   COL_ALIAS2  <span class="token comment">-- カラム２</span>
    <span class="token punctuation">)</span>   <span class="token keyword">AS</span>  <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span>
        ・・・
    <span class="token punctuation">)</span>
<span class="token punctuation">,</span>   NAME2   <span class="token punctuation">(</span>
        COL_ALIAS1  <span class="token comment">-- カラム１</span>
    <span class="token punctuation">,</span>   COL_ALIAS2  <span class="token comment">-- カラム２</span>
    <span class="token punctuation">)</span>   <span class="token keyword">AS</span>  <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span>
        ・・・
    <span class="token punctuation">)</span>
    
<span class="token comment">-- カラムエイリアスなし   </span>
<span class="token keyword">WITH</span>
    NAME1   <span class="token keyword">AS</span>  <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span>
        ・・・
    <span class="token punctuation">)</span>
<span class="token punctuation">,</span>   NAME2   <span class="token keyword">AS</span>  <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span>
        ・・・
    <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="offset句-fetch句"><a href="#offset句-fetch句" aria-hidden="true" class="header-anchor">#</a> OFFSET句 FETCH句</h4> <p>OFFSET、FETCHの前に改行を挿入すること</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	TBL1<span class="token punctuation">.</span>COLUMN1	<span class="token keyword">AS</span>	COLUMN1
<span class="token keyword">FROM</span>
	TABLE1	TBL1
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	TBL1<span class="token punctuation">.</span>COLUMN2	<span class="token keyword">DESC</span>
<span class="token keyword">OFFSET</span> <span class="token number">5</span> <span class="token keyword">ROWS</span>
<span class="token keyword">FETCH</span> <span class="token keyword">NEXT</span> <span class="token number">5</span> <span class="token keyword">ROWS</span> ONLY
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="hint句"><a href="#hint句" aria-hidden="true" class="header-anchor">#</a> HINT句</h4> <p>HINT句は独立した行で記載すること<br>
HINT内容にはインデントを付けること</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
<span class="token comment">/*+
	ここにHINTを記載
*/</span>
	TBL1<span class="token punctuation">.</span>COLUMN1	<span class="token keyword">AS</span>	COLUMN1
<span class="token keyword">FROM</span>
	TABLE1	TBL1
<span class="token keyword">WHERE</span>
	TBL1<span class="token punctuation">.</span>COLUMN2	<span class="token operator">=</span>	<span class="token number">1</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="コメント"><a href="#コメント" aria-hidden="true" class="header-anchor">#</a> コメント</h3> <ul><li><p>修正コメント</p> <p>（修正コメントが必要な場合、）<br>
処理追加の際、追加行の1行目の前と最終行の次の行にコメントを入れる。単一行の場合は、同一行の最後にコメントをつける。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 2004/04/23 仕様変更管理番号 ADD(または、MOD、DEL) 変更者名 S ←　修正開始点コメント  </span>
<span class="token punctuation">(</span>追加処理<span class="token punctuation">)</span>  
<span class="token comment">-- 2004/04/23仕様変更管理番号 ADD(または、MOD、DEL) 変更者名 E ←　修正終了点コメント  </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>単数行コメント</p> <p>SQL内で使用する単数行コメント（カラムコメントなど）には、「 <code>--</code> 」を使用する。</p></li> <li><p>複数行コメント</p> <p>「 <code>/*</code> <code>*/</code> 」を使用する。下記に例を示す。<br>
なお、前述で触れたとおり、SQLファイルの先頭にコメントを記述することは禁止とする。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/**********************************************************************/</span>
<span class="token comment">/*
 * コメントを始めるスラッシュとアスタリスクは、それだけを１行に置く。
 * それから、コメント・ブロック内の各行は縦にアスタリスクを置き
 * コメントがあることを強調する。
 * 最後に、アスタリスクとスラッシュは、それだけを１行に置く。
 */</span>
<span class="token comment">/**********************************************************************/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>複数行コメントアウト</p> <p>複数行をコメントアウトする場合は、各行を「<code>--</code>」でコメントアウトする。<br>
「 <code>/*</code> <code>*/</code> 」を使用すると、その中に「 <code>/*</code> <code>*/</code> 」が存在した場合、コメントアウトが途中で切れてしまう恐れがあるため、<br>
使用しない。</p></li> <li><p>論理名の記載</p> <p><code>SELECT</code>・<code>INSERT</code>・<code>UPDATE</code>・<code>MERGE</code>のカラム名記述箇所には単数行コメントでカラムの論理名を記載する。<br> <code>SELECT</code>・<code>INSERT</code>・<code>UPDATE</code>・<code>DELETE</code>・<code>MERGE</code>のテーブル名記述箇所には単数行コメントでテーブルの論理名を記載する。<br>
論理名はERD等で定義された論理名と必ず一致させること。</p></li></ul> <h3 id="外部結合"><a href="#外部結合" aria-hidden="true" class="header-anchor">#</a> 外部結合</h3> <p>結合方法はANSI形式（～<code>outer join</code> ～）ではなくOracle形式<code>(+)</code>を使用する。<br>
原則として<code>(+)</code>は条件文の右にくるカラムに付与する。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>T1<span class="token punctuation">.</span>COL1	<span class="token operator">=</span>	T2<span class="token punctuation">.</span>COL2<span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="型変換"><a href="#型変換" aria-hidden="true" class="header-anchor">#</a> 型変換</h3> <p>代入やWHERE句の条件設定などでデータ・タイプが異なる場合、明示的にタイプ変換を行う。（暗黙の型変換は使用しない）</p> <h3 id="比較演算子-2"><a href="#比較演算子-2" aria-hidden="true" class="header-anchor">#</a> 比較演算子</h3> <p>「等しくない」を示す演算子は「<code>!=</code>」を利用する。「<code>&lt;&gt;</code>」「<code>^=</code>」も動作するが統一の観点から利用しない。</p> <h3 id="order-by句"><a href="#order-by句" aria-hidden="true" class="header-anchor">#</a> ORDER BY句</h3> <p><code>ORDER BY</code> 数字の構文は使用せずに、カラム名を記載する。</p> <h3 id="group-by句"><a href="#group-by句" aria-hidden="true" class="header-anchor">#</a> GROUP BY句</h3> <p><code>GROUP BY</code> 数字の構文は使用せずに、カラム名を記載する。</p> <p>集約関数を利用する場合は必ず記載すること。（省略可能であっても省略しない）</p> <h3 id="exists句"><a href="#exists句" aria-hidden="true" class="header-anchor">#</a> EXISTS句</h3> <p>EXISTS句を記載する際、サブクエリになるSELECT句の指定は定数「<code>1</code>」とする。<br>
「<code>*</code>」（ワイルドカード）や「<code>'X'</code>」は統一の観点から利用しない。<br>
また「<code>*</code>」（ワイルドカード）についてはパフォーマンスの観点からも禁止とする。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">WHERE</span>
	<span class="token keyword">EXISTS</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span>
			<span class="token number">1</span>
		<span class="token keyword">FROM</span>
			FOO	F
		<span class="token keyword">WHERE</span>
			F<span class="token punctuation">.</span>COL1	<span class="token operator">=</span>	M<span class="token punctuation">.</span><span class="token keyword">KEY</span>
	<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="as句"><a href="#as句" aria-hidden="true" class="header-anchor">#</a> AS句</h3> <p>トップレベルのSELECT句には必ず<code>AS</code>句を記載し別名を付ける。<br>
同一の名前であってもAS句を付与する。<br>
また、「<code>AS</code>」は省略可能であるが、省略はしないこと。</p> <h3 id="where句"><a href="#where句" aria-hidden="true" class="header-anchor">#</a> WHERE句</h3> <ul><li><p>論理名の記載<br>
WHERE句でカラムと式を比較する際は左辺がカラムになるように記載すること。</p> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">WHERE</span>
	TBL<span class="token punctuation">.</span>COLUMN1	<span class="token operator">=</span>	<span class="token number">1</span>
<span class="token operator">AND</span>	TBL<span class="token punctuation">.</span>AMOUNT2	<span class="token operator">&gt;</span>	TBL<span class="token punctuation">.</span>AMOUNT3	<span class="token operator">+</span>	TBL<span class="token punctuation">.</span>AMOUNT4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>条件式の順序<br>
原則として、WHERE句で条件式を列挙する際、下記の順序を守ること。</p> <ol><li>テーブル単位にまとめて順番に記述する<br>
この際、テーブルの順序はFROM句に記述した順序に準ずること。</li> <li>1.のテーブル単位の中で絞り込み条件をまず記述し、その後結合条件を記述する。</li></ol> <p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">FROM</span>
	A_TABLE	A	<span class="token comment">-- A_TABLE</span>
<span class="token punctuation">,</span>	B_TABLE	B	<span class="token comment">-- B_TABLE</span>
<span class="token punctuation">,</span>	C_TABLE	C	<span class="token comment">-- C_TABLE</span>
<span class="token keyword">WHERE</span>
<span class="token comment">-- A_TABLEの絞り込み</span>
	A<span class="token punctuation">.</span>KEY1		<span class="token operator">=</span>	?
<span class="token operator">AND</span>	A<span class="token punctuation">.</span>KEY2		<span class="token operator">=</span>	?
<span class="token comment">-- B_TABLEの絞り込み</span>
<span class="token operator">AND</span>	B<span class="token punctuation">.</span>KEY1		<span class="token operator">=</span>	?
<span class="token operator">AND</span>	B<span class="token punctuation">.</span>KEY2		<span class="token operator">=</span>	?
<span class="token comment">-- B_TABLEの結合条件</span>
<span class="token operator">AND</span>	B<span class="token punctuation">.</span>COL1		<span class="token operator">=</span>	A<span class="token punctuation">.</span>COL1
<span class="token comment">-- C_TABLEの絞り込み</span>
<span class="token operator">AND</span>	C<span class="token punctuation">.</span>KEY1		<span class="token operator">=</span>	?
<span class="token operator">AND</span>	C<span class="token punctuation">.</span>KEY2		<span class="token operator">=</span>	?
<span class="token comment">-- C_TABLEの結合条件</span>
<span class="token operator">AND</span>	C<span class="token punctuation">.</span>COL1		<span class="token operator">=</span>	A<span class="token punctuation">.</span>COL1
<span class="token operator">AND</span>	C<span class="token punctuation">.</span>COL2		<span class="token operator">=</span>	A<span class="token punctuation">.</span>COL2
<span class="token operator">AND</span>	C<span class="token punctuation">.</span>COL3		<span class="token operator">=</span>	B<span class="token punctuation">.</span>COL3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul> <h3 id="count文"><a href="#count文" aria-hidden="true" class="header-anchor">#</a> COUNT文</h3> <p>レコード数を数えるCOUNT文の記述は<code>COUNT(*)</code>と記述する。<br> <code>COUNT(1)</code>・<code>COUNT('X')</code> ・<code>COUNT(KEY1)</code>という記載はNG。</p> <h2 id="sqlコーディング規約（パフォーマンス性）"><a href="#sqlコーディング規約（パフォーマンス性）" aria-hidden="true" class="header-anchor">#</a> SQLコーディング規約（パフォーマンス性）</h2> <p>本章ではパフォーマンス性を高めることを目的としたコーディング規約について記載する。</p> <h3 id="検索"><a href="#検索" aria-hidden="true" class="header-anchor">#</a> 検索</h3> <p>検索処理におけるコーディング規約を下記に示す。</p> <ul><li><p>中間一致、後方一致検索はインデックスを利用できないため避ける</p></li> <li><p>検索条件で<code>=</code>（等号）を使用できる場合は必ず使用する</p> <p><code>A=1 or A=2</code>とする方が<code>A&gt;0 and A&lt;3</code>などと記述するのよりパフォーマンス上優位な場合が多い。<br>
これはAにインデックスがある場合、<code>=</code>であれば、インデックスが有効に使われるためである。</p></li> <li><p>可能な限り検索条件にパーティションキーの値を指定する</p></li> <li><p>全列ワールドカード「<code>*</code>」の使用はせず、カラム名を明記する</p></li> <li><p>インデックスによる検索を指定したい場合、下記の記載を行わない</p> <ul><li><p>インデックスカラムを含む演算に対して条件指定</p> <p>悪い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>TBL1<span class="token punctuation">.</span>COL1	<span class="token operator">+</span>	<span class="token number">1</span>	<span class="token operator">&gt;</span>	<span class="token number">100</span> <span class="token comment">/* NGパターン 右辺で演算してください */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>TBL1<span class="token punctuation">.</span>COL1	<span class="token operator">&gt;</span>	<span class="token number">100</span>	<span class="token operator">-</span>	<span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>インデックスカラムに関数を通した値に対して条件指定</p> <p>悪い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/* NGパターン 右辺に関数を通してください */</span>  
TO_CHAR<span class="token punctuation">(</span>TBL1<span class="token punctuation">.</span>COL1<span class="token punctuation">,</span> <span class="token string">'YYYYMMDD'</span><span class="token punctuation">)</span>	<span class="token operator">&gt;</span>	<span class="token string">'20151231'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>TBL1<span class="token punctuation">.</span>COL1	<span class="token operator">&gt;=</span>	TO_DATE<span class="token punctuation">(</span><span class="token string">'20160101'</span><span class="token punctuation">,</span> <span class="token string">'YYYYMMDD'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>インデックスカラムを<code>OR</code>で条件指定（禁止ではないが原則行わない）</p> <p>悪い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">(</span>
	<span class="token comment">/* NGパターンINDEXが利用されない場合があります。他の方法を検討してください */</span>
		TBL1<span class="token punctuation">.</span>COL1	<span class="token operator">=</span>	<span class="token number">1</span>
	<span class="token operator">OR</span>	TBL1<span class="token punctuation">.</span>COL1	<span class="token operator">=</span>	<span class="token number">2</span>
	<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li></ul> <h3 id="挿入"><a href="#挿入" aria-hidden="true" class="header-anchor">#</a> 挿入</h3> <p>挿入処理におけるコーディング規約を下記に示す。</p> <ul><li>全列ワールドカード「<code>*</code>」の使用はせず、カラム名を明記する。</li></ul> <h3 id="更新"><a href="#更新" aria-hidden="true" class="header-anchor">#</a> 更新</h3> <p>更新処理におけるコーディング規約を下記に示す。</p> <ul><li>主キーの値のUPDATEは原則行わない。外部キーがあればエラーになる。<br>
外部キーが無い場合でも、事実上、主キーの値を利用して、検索、更新する場合は、リンクが切れてしまう。</li> <li>パーティションキーのUPDATEは原則行わない。</li> <li>VIEWを使用するデータ更新は禁止。更新は実表に対して行う。</li></ul> <h3 id="削除"><a href="#削除" aria-hidden="true" class="header-anchor">#</a> 削除</h3> <p>削除処理におけるコーディング規約を下記に示す。</p> <ul><li>大量件数（数百万件レベル）のdelete文発行は避ける。</li></ul> <h3 id="with句-2"><a href="#with句-2" aria-hidden="true" class="header-anchor">#</a> WITH句</h3> <p>WITH句の誤った使い方はパフォーマンスの劣化を招くため、WITH句を利用する場合はDBAに相談する。</p> <h3 id="distinct句"><a href="#distinct句" aria-hidden="true" class="header-anchor">#</a> DISTINCT句</h3> <p>DISTINCTは、暗黙のソート処理が行われる可能性があるため性能劣化につながる。<br>
EXISTS句の使用・代替を検討すること。</p> <p>悪い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    <span class="token keyword">DISTINCT</span>
    D<span class="token punctuation">.</span><span class="token keyword">NO</span>    <span class="token keyword">AS</span>  DEPT_NO
<span class="token punctuation">,</span>   D<span class="token punctuation">.</span>NAME  <span class="token keyword">AS</span>  DEPT_NAME
<span class="token keyword">FROM</span>
    DEPARTMENT  D
<span class="token punctuation">,</span>   EMPLOYEE    E
<span class="token keyword">WHERE</span>
    D<span class="token punctuation">.</span><span class="token keyword">NO</span>    <span class="token operator">=</span>   E<span class="token punctuation">.</span>DEPT_NO   <span class="token comment">-- 社員が一人以上属している部門を取得</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>良い例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    D<span class="token punctuation">.</span><span class="token keyword">NO</span>    <span class="token keyword">AS</span>  DEPT_NO
<span class="token punctuation">,</span>   D<span class="token punctuation">.</span>NAME  <span class="token keyword">AS</span>  DEPT_NAME
<span class="token keyword">FROM</span>
    DEPARTMENT  D
<span class="token keyword">WHERE</span>
    <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span>
            <span class="token number">1</span>
        <span class="token keyword">FROM</span>
            EMPLOYEE    E
        <span class="token keyword">WHERE</span>
            D<span class="token punctuation">.</span><span class="token keyword">NO</span>    <span class="token operator">=</span>   E<span class="token punctuation">.</span>DEPT_NO   <span class="token comment">-- 社員が一人以上属している部門を取得</span>
    <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="in句-2"><a href="#in句-2" aria-hidden="true" class="header-anchor">#</a> IN句</h3> <p>IN句は最大1000個まで指定できるが、200個程度でもORAエラーが発生するケースがある。<br>
またIN句の少しだけ異なるSQLが大量に発行されるとCPU高騰やメモリ枯渇を招く。<br>
従って100を超えるような長いIN句は使用せず、一時表を利用して <code>IN (SELECT ・・・ FROM 一時表)</code>のように書き換える。</p> <h3 id="not-in句"><a href="#not-in句" aria-hidden="true" class="header-anchor">#</a> NOT IN句</h3> <p>原則<code>NOT IN（SELECT～）</code>は使用せずに、<code>NOT EXISTS (SELECT～)</code>を使用する。<br> <code>NOT IN</code>句は、内部的にソートマージの結合をすることでテーブルをフルスキャンする場合があるため、性能が悪化する可能性がある。</p> <h3 id="union句"><a href="#union句" aria-hidden="true" class="header-anchor">#</a> UNION句</h3> <p><code>UNION</code>は<code>DISTINCT</code>処理が含まれパフォーマンス上問題があるため、<code>UNION ALL</code>を使用する。</p> <h3 id="パラレルヒント句"><a href="#パラレルヒント句" aria-hidden="true" class="header-anchor">#</a> パラレルヒント句</h3> <p>パラレルヒント句はDB負荷が高いため、原則使用禁止とする。付与したい場合はDBAに相談する。</p> <h3 id="select-for-update"><a href="#select-for-update" aria-hidden="true" class="header-anchor">#</a> SELECT FOR UPDATE</h3> <ul><li><code>SELECT FOR UPDATE</code>は<code>NO WAIT</code>または「<code>WAIT</code>秒数指定」を必ず付ける。<br> <code>WAIT</code>指定なしの場合はロックが解除されてもプログラムに制御が返らないことがある。<br>
※WAIT秒数指定を行う際の秒数は各開発者で決めるのではなくプロジェクトで決定した方針に従うこと。<br>
また、SQLライブラリを利用していて定数が記述できる場合は定数で記述すること。</li> <li><code>SELECT FOR UPDATE</code>で複数行にロックをかける場合、同時実行されるとデットロックを起こす可能性があるため、１件のロックでない場合は<code>ORDER BY</code>を指定する。</li></ul> <h3 id="分析関数"><a href="#分析関数" aria-hidden="true" class="header-anchor">#</a> 分析関数</h3> <p>分析関数の使用は可能だが、性能悪化を招く恐れがあるため、特性を知らない方はDBAに相談する。</p> <h3 id="インデックス"><a href="#インデックス" aria-hidden="true" class="header-anchor">#</a> インデックス</h3> <p>インデックスの必要性についてはDBAで最終判断するため、必要とする場合はDBAへ相談する。</p> <h3 id="外部結合-2"><a href="#外部結合-2" aria-hidden="true" class="header-anchor">#</a> 外部結合</h3> <p>外部結合する際、内部表（駆動表）はなるべく想定件数の少ない表にする。</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/future-architect/coding-standards/edit/master/documents/forSQL/SQLコーディング規約（Oracle）.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2019-4-1 22:54:23</span></div></div> <!----> </div> <!----></div></div>
    <script src="/coding-standards/assets/js/app.dfe06510.js" defer></script><script src="/coding-standards/assets/js/10.58e05c41.js" defer></script><script src="/coding-standards/assets/js/3.50d05cce.js" defer></script>
  </body>
</html>
